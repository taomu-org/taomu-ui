import{c as xe,a as w,j as Ee,l as V}from"./mini-scrollbar-DKhO_gnw.js";import{r as M,R as c}from"./index-CZMpeKRu.js";import{u as we,a as je,c as ke}from"./use-taomu-classname-BRbG1Owv.js";import{i as _e,a as Ie,b as Te}from"./input.styled-DsmZe8Yk.js";import{D as ze}from"./dropdown-Doziki3P.js";import"./index-b9g8Vhfs.js";import{i as Ce}from"./global-vars-CuQyjSF-.js";import{P as f}from"./index-bPVxIqPX.js";import{L as Pe}from"./loading-DUVmW9bg.js";function W(){return W=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},W.apply(this,arguments)}function Se(e,a){if(e==null)return{};var n=Fe(e,a),t,u;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(u=0;u<i.length;u++)t=i[u],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Fe(e,a){if(e==null)return{};var n={},t=Object.keys(e),u,i;for(i=0;i<t.length;i++)u=t[i],!(a.indexOf(u)>=0)&&(n[u]=e[u]);return n}var N=M.forwardRef(function(e,a){var n=e.color,t=n===void 0?"currentColor":n,u=e.size,i=u===void 0?24:u,h=Se(e,["color","size"]);return c.createElement("svg",W({ref:a,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},h),c.createElement("polyline",{points:"6 9 12 15 18 9"}))});N.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};N.displayName="ChevronDown";function $(){return $=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},$.apply(this,arguments)}function qe(e,a){if(e==null)return{};var n=De(e,a),t,u;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(u=0;u<i.length;u++)t=i[u],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function De(e,a){if(e==null)return{};var n={},t=Object.keys(e),u,i;for(i=0;i<t.length;i++)u=t[i],!(a.indexOf(u)>=0)&&(n[u]=e[u]);return n}var A=M.forwardRef(function(e,a){var n=e.color,t=n===void 0?"currentColor":n,u=e.size,i=u===void 0?24:u,h=qe(e,["color","size"]);return c.createElement("svg",$({ref:a,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},h),c.createElement("polyline",{points:"18 15 12 9 6 15"}))});A.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};A.displayName="ChevronUp";function R(){return R=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},R.apply(this,arguments)}function Le(e,a){if(e==null)return{};var n=Ve(e,a),t,u;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(u=0;u<i.length;u++)t=i[u],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Ve(e,a){if(e==null)return{};var n={},t=Object.keys(e),u,i;for(i=0;i<t.length;i++)u=t[i],!(a.indexOf(u)>=0)&&(n[u]=e[u]);return n}var B=M.forwardRef(function(e,a){var n=e.color,t=n===void 0?"currentColor":n,u=e.size,i=u===void 0?24:u,h=Le(e,["color","size"]);return c.createElement("svg",R({ref:a,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},h),c.createElement("circle",{cx:"11",cy:"11",r:"8"}),c.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))});B.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};B.displayName="Search";try{Dropdown.displayName="Dropdown",Dropdown.__docgenInfo={description:"",displayName:"Dropdown",props:{menus:{defaultValue:null,description:"",name:"menus",required:!1,type:{name:"MenuItemProps[]"}},menuProps:{defaultValue:{value:"{}"},description:"",name:"menuProps",required:!1,type:{name:"MenuProps"}},equalWidth:{defaultValue:null,description:"",name:"equalWidth",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"equal"'},{value:'"min-width"'},{value:'"max-width"'}]}},onMenuItemClick:{defaultValue:null,description:"",name:"onMenuItemClick",required:!1,type:{name:"((item: MenuItemProps, index: number, event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},children:{defaultValue:null,description:"触发元素",name:"children",required:!0,type:{name:"Element"}},content:{defaultValue:null,description:"弹出内容",name:"content",required:!1,type:{name:"ComponentType<any>"}},contentProps:{defaultValue:{value:"{}"},description:"弹出内容 props 用于更新弹层内部数据",name:"contentProps",required:!1,type:{name:"MenuProps"}},trigger:{defaultValue:{value:"click"},description:"触发条件，默认: click",name:"trigger",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"click"'},{value:'"hover"'}]}},position:{defaultValue:null,description:"弹出位置, 默认为 'bottom-left'",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom"'},{value:'"center"'},{value:'"left-left"'},{value:'"left-right"'},{value:'"left-top"'},{value:'"left-bottom"'},{value:'"left-center"'},{value:'"right-left"'},{value:'"right-right"'},{value:'"right-top"'},{value:'"right-bottom"'},{value:'"right-center"'},{value:'"top-left"'},{value:'"top-right"'},{value:'"top-top"'},{value:'"top-bottom"'},{value:'"top-center"'},{value:'"bottom-left"'},{value:'"bottom-right"'},{value:'"bottom-top"'},{value:'"bottom-bottom"'},{value:'"bottom-center"'},{value:'"center-left"'},{value:'"center-right"'},{value:'"center-top"'},{value:'"center-bottom"'},{value:'"center-center"'},{value:'"dialog-center"'}]}},portalOptions:{defaultValue:{value:"{}"},description:"传送门选项",name:"portalOptions",required:!1,type:{name:"PopupPortalOptions"}},debounceTime:{defaultValue:null,description:"防抖时间, 只在 trigger 为 hover 时生效",name:"debounceTime",required:!1,type:{name:"number"}}}}}catch{}Ce("common",{});const We=xe``,K=c.forwardRef(({className:e,cssVars:a,style:n,status:t="default",allowClear:u,width:i="100%",height:h=32,padding:ee="0 8px",placeholder:te,radius:ne,leftNode:re,rightNode:G,showSearch:d,options:o,loading:ue,defaultOpened:le=!1,openOnFocus:ae,closeOnBlur:ie=!0,dropdownProps:j={},name:oe,labelProp:H="label",valueProp:v="value",filterProp:k="label",value:m,onChange:z,onFocus:C,onBlur:P,onKeyDown:S,...se},ce)=>{const g=c.useRef(null),b=c.useRef(null),[_,F]=c.useState(!1),[x,U]=c.useState(le),[O,I]=c.useState(),[E,J]=c.useState(""),fe=we("select","flex row center-v gap-6",`status-${t}`,{focused:_},e),pe=je({inputWidth:i,inputHeight:h,inputPadding:ee,inputRadius:ne,...a},n);c.useImperativeHandle(ce,Q),c.useEffect(()=>{var r,l;_?(r=g.current)==null||r.focus():(l=g.current)==null||l.blur()},[_]),c.useEffect(()=>{var r;if(d){const l=o==null?void 0:o.find(s=>s[v]==m);l&&J(((r=l==null?void 0:l.label)==null?void 0:r.toString())||"")}},[m,d,v]);const y=c.useMemo(()=>{var l;const r=[];if(!(o!=null&&o.length))return r;for(let s=0;s<o.length;s++){const p=o[s];if(d&&E){const T=typeof k=="string"?[k]:k;let Z=!1;for(let L=0;L<T.length;L++){const Oe=T[L];if((l=p[Oe])!=null&&l.includes(E)){Z=!0;break}}if(!Z)continue}r.push({name:(p.name||p[v])??s,active:O===s,...p})}return r},[o,O,E,k]);c.useEffect(()=>{q()},[m,E]);const de=c.useMemo(()=>{if(d)return E;if(!m)return"";const r=o==null?void 0:o.find(s=>s[v]==m);return(r==null?void 0:r[H])||m},[m,o,H,v,E,d]);function Q(){return{target:{name:oe,value:m},opened:x,input:g.current,dropdown:b.current,setFocused:F}}function me(r){const l=o==null?void 0:o.findIndex(T=>T.value==r);if(l===void 0||l<0)return;const s=o==null?void 0:o[l];I(l);const p=Q();p.target.value=r,z==null||z(p,s==null?void 0:s[v],s)}function X(r=0){const l=y==null?void 0:y[r<0?0:r];l&&(me(l[v]),D())}function q(){const r=o==null?void 0:o.findIndex(l=>l[v]==m);I(r)}function Y(){var r,l;q(),(r=g.current)!=null&&r.parentElement?(U(!0),(l=b.current)==null||l.openPopup(g.current.parentElement)):console.warn("Select open field: element not found")}function D(){var r;q(),U(!1),(r=b.current)==null||r.closePopup()}function ve(r){F(!0),C==null||C(r),setTimeout(()=>{var l,s;ae&&!x&&!((s=(l=b.current)==null?void 0:l.popupPortal)!=null&&s.isEnter)&&Y()},120)}function ge(r){F(!1),P==null||P(r),ie&&D()}function ye(r){switch(S==null||S(r),r.key){case"Escape":D();break;case"Enter":x?X(O):Y();break;case"ArrowDown":if(x){r.preventDefault();const l=O===void 0?0:(O+1)%y.length;I(l)}break;case"ArrowUp":if(x){r.preventDefault();const l=O===void 0?y.length-1:(O-1+y.length)%y.length;I(l)}break}}function he(r){var l,s,p;d&&(J(r.target.value),!((s=(l=b.current)==null?void 0:l.popupPortal)!=null&&s.isEnter)&&g.current&&((p=b.current)==null||p.openPopup(g.current.parentElement)))}function be(){return G||(ue?w(Pe,{size:16,weight:2}):d&&_?w(B,{size:16,color:V("colorTextGray")}):x?w(A,{size:16,color:V("colorTextGray")}):w(N,{size:16,color:V("colorTextGray")}))}return w(ze,{ref:b,trigger:"click",equalWidth:"equal",menus:y,onMenuItemClick:(r,l)=>{X(l)},...j,portalOptions:{escToClose:!0,...j==null?void 0:j.portalOptions},children:Ee("div",{className:fe,style:pe,css:[_e,Ie,We],onKeyDown:ye,...se,children:[re,w("input",{ref:g,css:Te,readOnly:!d,placeholder:te,value:de,className:ke({cud:!d}),onFocus:ve,onBlur:ge,onChange:he}),be()]})})});try{K.displayName="Select",K.__docgenInfo={description:"",displayName:"Select",props:{}}}catch{}export{N as C,K as S,A as a,B as b};
