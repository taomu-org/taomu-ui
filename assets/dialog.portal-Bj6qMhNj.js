var m=Object.defineProperty;var k=n=>{throw TypeError(n)};var D=(n,o,t)=>o in n?m(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t;var e=(n,o,t)=>D(n,typeof o!="symbol"?o+"":o,t),R=(n,o,t)=>o.has(n)||k("Cannot "+t);var g=(n,o,t)=>(R(n,o,"read from private field"),t?t.call(n):o.get(n)),O=(n,o,t)=>o.has(n)?k("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(n):o.set(n,t);import{a as d}from"./mini-scrollbar-BOcaVSbM.js";import{R as y}from"./index-2yJIXLcc.js";import"./index--JTMPUBq.js";import{D as P}from"./dialog-DjVtlqYm.js";import{P as b}from"./popup-trigger-DcMekOIW.js";var f;class w extends b{constructor(t,s={},i={}){const{onBeforeLeave:r,...C}=i;i=Object.assign(B(),C,{onBeforeLeave:l=>{var a,c;(c=(a=this.dialogOptions)==null?void 0:a.onClose)==null||c.call(a),r==null||r(l)}});super(l=>{const a=g(this,f);return d(a,{...l})},i);e(this,"Content",()=>null);e(this,"asyncCallbackRef",y.createRef());O(this,f,t=>{const s=this.DialogContent;return d(P,{...this.dialogOptions,onClose:this.close,dialogPortalInstance:this,children:d(s,{...t,dialogPortalInstance:this,defineOnOk:this.defineOnOk,defineOnCancel:this.defineOnCancel})})});e(this,"defineOnOk",t=>{this.asyncCallbackRef.current||(this.asyncCallbackRef.current={}),this.asyncCallbackRef.current.onOk=t});e(this,"defineOnCancel",t=>{this.asyncCallbackRef.current||(this.asyncCallbackRef.current={}),this.asyncCallbackRef.current.onCancel=t});e(this,"open",(t,s={},i={})=>new Promise((r,C)=>{const l={...s},a=s.asyncCallback;l.asyncCallback=(p,u)=>{a==null||a(p,u),p==="ok"?r(u):C(u)};const c=i.onBackgroundClickClose,h=i.onEscClose;i.onBackgroundClickClose=()=>{c==null||c(),C()},i.onEscClose=()=>{h==null||h(),C()},this.updateDialogOptionsStatic(l),i&&this.updateBaseOptionsStatic(i),this.baseOpen(t)}));e(this,"updateDialogOptionsStatic",t=>{Object.assign(this.dialogOptions,t)});e(this,"updateBaseOptionsStatic",t=>{Object.assign(this.baseOptions,t)});this.DialogContent=t,this.dialogOptions=s,this.baseOptions=i,this.Content=g(this,f)}}f=new WeakMap;function B(){return{positionType:"dialog-center",contentAnimationConfig:"dialogZoomOut",overlay:!0,clickToClose:!1,lockScroll:!0,createContainerId:"taomu-dialog-container"}}export{w as D};
